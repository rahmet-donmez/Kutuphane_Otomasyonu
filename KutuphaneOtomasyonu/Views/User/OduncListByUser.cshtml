@using Entity.Models
@model List<Book>

<html>



<body>
    <!--  wrapper -->
    <div id="wrapper">
        <!-- navbar top -->
        <!-- end navbar top -->
        <!-- navbar side -->
       
        <!--  page-wrapper -->
        <div id="page-wrapper">


            <div class="row">
                <!--  page header -->
                <div class="col-lg-12">
                    <h1 class="page-header">Ödünç Alınan Kitaplar</h1>
                </div>
                <!-- end  page header -->
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <!-- Advanced Tables -->
                    <div class="panel panel-default">
                        
                        <div class="panel-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Kitap Adı</th>
                                            <th>İşlem Tarihi</th>
                                           
                                            <th>Durumu</th>
                                            

                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            int i = 1;
                                        
                                        foreach(var book in Model){
                                            <tr class="gradeU">
                                            <td>@i</td>
                                            <td>@book.name</td>
                                            <td>@ViewBag.Dates[i-1]</td>
                                                    @{
                                                        TimeSpan DakikaFarki = new TimeSpan();
                                                        DakikaFarki = DateTime.Now.Date.Subtract(ViewBag.Dates[i - 1]);
                                                        var sure =DakikaFarki.TotalDays;

                                                   }

                                                    @if (sure>=12 && sure<= 14)
                                                {
                                                        <td class="danger"> <b> </b>Teslim süresi dolmak üzere</td>
                                                }
                                                                                else if (sure > 14)
                                                {
                                                                 <td class="danger">TESLİM SÜRESİ GEÇTİ !!!</td>
                                                }
                                                else
                                                {
                                                  <td>Süresi var</td>   
                                                }
                                                         </tr>
                                                i++;
                                            }
                                        }
                                        
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                    <!--End Advanced Tables -->
                </div>
            </div>
            
        </div>
        <!-- end page-wrapper -->

 </div>
    

</body>

</html>
